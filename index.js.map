{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\nexport const createGalleryCardTemplate = image => {\n  return `  \n      <li class=\"gallery-card\">\n      <a href=\"${image.largeImageURL}\">\n        <img class=\"gallery-img\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n      </a>\n      <div class=\"gallery-info\">\n        <p><b>Likes</b> ${image.likes}</p>\n        <p><b>Views</b> ${image.views}</p>\n        <p><b>Comments</b> ${image.comments}</p>\n        <p><b>Downloads</b> ${image.downloads}</p>\n      </div>\n    </li>\n  `\n}","import axios from \"axios\";\n\n\nconst BASE_URL = \"https://pixabay.com/api/\";\n\n\nexport const fetchPhotos = async (searchedQuery, page = 1, per_page = 15) => {\n    try {\n\n        const axiosOptions = {\n            params: {\n                key: \"45489972-425dbd0ae29bdd8e452daca41\",\n                q: searchedQuery,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: \"true\",\n                page: page,\n                per_page: per_page,\n            },\n        };\n\n        const response = await axios.get(`${BASE_URL}`, axiosOptions);\n        \n        return response.data;\n\n    } catch (error) {\n        throw new Error(error.response.status);\n    }\n\n};","\nimport { createGalleryCardTemplate } from './js/render-functions.js';\nimport { fetchPhotos } from './js/pixabay-api.js';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\n\nconst searchForm = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nlet lightbox = new SimpleLightbox('.gallery a');\nlet currentPage = 1;\nlet searchedValue = '';\nlet totalHits = 0;\nlet cardHeight = 0;\n\n\nconst onSearchFormSubmit = async (event) => {\n    event.preventDefault();\n\n    searchedValue = searchForm.elements.user_query.value.trim();\n    \n    if (!searchedValue) {\n        iziToast.error({\n            message: 'Please enter a valid search query!',\n            position: 'topRight',\n            maxWidth: '500px',\n        });\n        return;\n    }\n\n    currentPage = 1;\n\n    loadMoreBtn.classList.add('is-hidden');\n\n    loader.classList.remove('is-hidden');\n\n    try {\n        const data = await fetchPhotos(searchedValue, currentPage);\n\n        loader.classList.add('is-hidden');\n\n        if (data.hits.length === 0) {\n            iziToast.error({\n                message: 'Sorry, there are no images matchings your search query. Please try againe!',\n                position: 'topRight',\n                maxWidth: '500px',\n            });\n\n            gallery.innerHTML = '';\n            searchForm.reset();\n\n            return;\n        }\n\n        totalHits = data.totalHits;\n\n        const galleryCardsTemplate = data.hits.map(imgDetails => createGalleryCardTemplate(imgDetails)).join('');\n        gallery.innerHTML = galleryCardsTemplate;\n\n        const galleryCard = gallery.querySelector('li');\n        cardHeight = galleryCard.getBoundingClientRect().height;\n            \n        lightbox.refresh();\n\n        if (currentPage * 15 >= totalHits) {\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n                maxWidth: '500px',\n            });\n        } else {\n            loadMoreBtn.classList.remove('is-hidden');\n        }\n        \n    } catch (error) {\n        console.log(err);\n        iziToast.error({\n            message: 'Something went wrong. Please try again later!',\n            position: 'topRight',\n            maxWidth: '500px',\n        });\n           \n        loader.classList.add('is-hidden');    \n    }\n\n};\n\nconst onLoadMoreBtnClick = async event => {\n    currentPage++;\n    loader.classList.remove('is-hidden');\n\n    try {\n        const data = await fetchPhotos(searchedValue, currentPage);\n       \n        loader.classList.add('is-hidden');\n\n        const galleryCardsTemplate = data.hits.map(imgDetails => createGalleryCardTemplate(imgDetails)).join('');\n\n        gallery.insertAdjacentHTML('beforeend', galleryCardsTemplate);\n            \n        lightbox.refresh();\n\n        \n        scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth'\n        });\n\n        if (currentPage * 15 >= totalHits) {\n            loadMoreBtn.classList.add('is-hidden');\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n                maxWidth: '500px',\n            });\n        } \n\n    } catch (error) {\n        console.log(error);\n        iziToast.error({\n            message: 'Something went wrong. Please try again later!',\n            position: 'topRight',\n            maxWidth: '500px',\n        });\n           \n        loader.classList.add('is-hidden');\n     };\n}\n\nsearchForm.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n\n"],"names":["createGalleryCardTemplate","image","BASE_URL","fetchPhotos","searchedQuery","page","per_page","axiosOptions","axios","error","searchForm","gallery","loader","loadMoreBtn","lightbox","SimpleLightbox","currentPage","searchedValue","totalHits","cardHeight","onSearchFormSubmit","event","iziToast","data","galleryCardsTemplate","imgDetails","onLoadMoreBtnClick"],"mappings":"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"}