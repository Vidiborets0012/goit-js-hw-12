{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\nexport const createGalleryCardTemplate = image => {\n  return `  \n      <li class=\"gallery-card\">\n      <a href=\"${image.largeImageURL}\">\n        <img class=\"gallery-img\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n      </a>\n      <div class=\"gallery-info\">\n        <p><b>Likes</b> ${image.likes}</p>\n        <p><b>Views</b> ${image.views}</p>\n        <p><b>Comments</b> ${image.comments}</p>\n        <p><b>Downloads</b> ${image.downloads}</p>\n      </div>\n    </li>\n  `\n}","\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport const fetchPhotos = searchedQuery => {\n  const urlParams = new URLSearchParams({\n    key: \"45489972-425dbd0ae29bdd8e452daca41\",\n    q: searchedQuery,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: \"true\",\n  });\n\n  return fetch(`${BASE_URL}?${urlParams}`).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n\n    return response.json();\n  });\n};","\nimport { createGalleryCardTemplate } from './js/render-functions.js';\nimport { fetchPhotos } from './js/pixabay-api.js';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\n\nconst searchForm = document.querySelector('.search-form');\n\nconst gallery = document.querySelector('.gallery');\n\nconst loader = document.querySelector('.loader');\n\nlet lightbox = new SimpleLightbox('.gallery a');\n\n\nconst onSearchFormSubmit = event => {\n    event.preventDefault();\n\n    const searchedValue = searchForm.elements.user_query.value.trim();\n// Покращення:\n// якщо searchedValue є пробілом, функція fetchPhotos все одно викликається,\n// що призводить до непотрібного API запиту.\n// Потрібно searchedValue перед запитом на бекенд трімнути і перевірити на порожній рядок\n    \n    if (!searchedValue) {\n        iziToast.error({\n            message: 'Please enter a valid search query!',\n            position: 'topRight',\n            maxWidth: '500px',\n        });\n        return;\n    }\n\n    loader.classList.remove('is-hidden');\n\n// коли з бекенда приходить порожній масив, не вимикається лоадер і постійно крутиться.\n\n    fetchPhotos(searchedValue)\n        .then(data => {\n            // вимкнути лоадер\n            loader.classList.add('is-hidden');\n                      \n            if (data.hits.length === 0) {\n                iziToast.error({\n                    message: 'Sorry, there are no images matchings your search query. Please try againe!',\n                    position: 'topRight',\n                    maxWidth: '500px',\n                });\n\n                gallery.innerHTML = '';\n                searchForm.reset();\n\n                return;\n            }\n\n            // loader.classList.add('is-hidden');\n\n            const galleryCardsTemplate = data.hits.map(imgDetails => createGalleryCardTemplate(imgDetails)).join('');\n\n            gallery.innerHTML = galleryCardsTemplate;\n            \n            lightbox.refresh();\n\n        })\n        .catch(err => {\n            console.log(err);\n            iziToast.error({\n                message: 'Something went wrong. Please try again later!',\n                position: 'topRight',\n                maxWidth: '500px',\n            });\n            // вимкнути лоадер у випадку помилки\n            loader.classList.add('is-hidden');\n        });\n\n};\n\nsearchForm.addEventListener('submit', onSearchFormSubmit);\n\n"],"names":["createGalleryCardTemplate","image","BASE_URL","fetchPhotos","searchedQuery","urlParams","response","searchForm","gallery","loader","lightbox","SimpleLightbox","onSearchFormSubmit","event","searchedValue","iziToast","data","galleryCardsTemplate","imgDetails","err"],"mappings":"6vBACO,MAAMA,EAA4BC,GAChC;AAAA;AAAA,iBAEQA,EAAM,aAAa;AAAA,wCACIA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,0BAGpDA,EAAM,KAAK;AAAA,0BACXA,EAAM,KAAK;AAAA,6BACRA,EAAM,QAAQ;AAAA,8BACbA,EAAM,SAAS;AAAA;AAAA;AAAA,ICVvCC,EAAW,2BAEJC,EAAcC,GAAiB,CAC1C,MAAMC,EAAY,IAAI,gBAAgB,CACpC,IAAK,qCACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,MAChB,CAAG,EAED,OAAO,MAAM,GAAGF,CAAQ,IAAIG,CAAS,EAAE,EAAE,KAAKC,GAAY,CACxD,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAGjC,OAAOA,EAAS,MACpB,CAAG,CACH,ECPMC,EAAa,SAAS,cAAc,cAAc,EAElDC,EAAU,SAAS,cAAc,UAAU,EAE3CC,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIC,EAAW,IAAIC,EAAe,YAAY,EAG9C,MAAMC,EAAqBC,GAAS,CAChCA,EAAM,eAAc,EAEpB,MAAMC,EAAgBP,EAAW,SAAS,WAAW,MAAM,OAM3D,GAAI,CAACO,EAAe,CAChBC,EAAS,MAAM,CACX,QAAS,qCACT,SAAU,WACV,SAAU,OACtB,CAAS,EACD,MACH,CAEDN,EAAO,UAAU,OAAO,WAAW,EAInCN,EAAYW,CAAa,EACpB,KAAKE,GAAQ,CAIV,GAFAP,EAAO,UAAU,IAAI,WAAW,EAE5BO,EAAK,KAAK,SAAW,EAAG,CACxBD,EAAS,MAAM,CACX,QAAS,6EACT,SAAU,WACV,SAAU,OAC9B,CAAiB,EAEDP,EAAQ,UAAY,GACpBD,EAAW,MAAK,EAEhB,MACH,CAID,MAAMU,EAAuBD,EAAK,KAAK,IAAIE,GAAclB,EAA0BkB,CAAU,CAAC,EAAE,KAAK,EAAE,EAEvGV,EAAQ,UAAYS,EAEpBP,EAAS,QAAO,CAE5B,CAAS,EACA,MAAMS,GAAO,CACV,QAAQ,IAAIA,CAAG,EACfJ,EAAS,MAAM,CACX,QAAS,gDACT,SAAU,WACV,SAAU,OAC1B,CAAa,EAEDN,EAAO,UAAU,IAAI,WAAW,CAC5C,CAAS,CAET,EAEAF,EAAW,iBAAiB,SAAUK,CAAkB"}